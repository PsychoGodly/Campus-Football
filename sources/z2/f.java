package z2;

import f3.a;
import java.io.EOFException;
import java.io.IOException;
import k3.h;
import k3.k;
import k4.a0;
import k4.n0;
import n2.r1;
import n2.y2;
import p2.h0;
import s2.e0;
import s2.l;
import s2.m;
import s2.n;
import s2.r;
import s2.x;
import s2.y;

/* compiled from: Mp3Extractor */
public final class f implements l {

    /* renamed from: u  reason: collision with root package name */
    public static final r f24119u = e.f39471b;

    /* renamed from: v  reason: collision with root package name */
    private static final h.a f24120v = d.f39470a;

    /* renamed from: a  reason: collision with root package name */
    private final int f24121a;

    /* renamed from: b  reason: collision with root package name */
    private final long f24122b;

    /* renamed from: c  reason: collision with root package name */
    private final a0 f24123c;

    /* renamed from: d  reason: collision with root package name */
    private final h0.a f24124d;

    /* renamed from: e  reason: collision with root package name */
    private final x f24125e;

    /* renamed from: f  reason: collision with root package name */
    private final y f24126f;

    /* renamed from: g  reason: collision with root package name */
    private final e0 f24127g;

    /* renamed from: h  reason: collision with root package name */
    private n f24128h;

    /* renamed from: i  reason: collision with root package name */
    private e0 f24129i;

    /* renamed from: j  reason: collision with root package name */
    private e0 f24130j;

    /* renamed from: k  reason: collision with root package name */
    private int f24131k;

    /* renamed from: l  reason: collision with root package name */
    private a f24132l;

    /* renamed from: m  reason: collision with root package name */
    private long f24133m;

    /* renamed from: n  reason: collision with root package name */
    private long f24134n;

    /* renamed from: o  reason: collision with root package name */
    private long f24135o;

    /* renamed from: p  reason: collision with root package name */
    private int f24136p;

    /* renamed from: q  reason: collision with root package name */
    private g f24137q;

    /* renamed from: r  reason: collision with root package name */
    private boolean f24138r;

    /* renamed from: s  reason: collision with root package name */
    private boolean f24139s;

    /* renamed from: t  reason: collision with root package name */
    private long f24140t;

    public f() {
        this(0);
    }

    private void f() {
        k4.a.h(this.f24129i);
        n0.j(this.f24128h);
    }

    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r0v0, resolved type: z2.g} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r1v1, resolved type: z2.c} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r0v1, resolved type: z2.b} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r0v5, resolved type: z2.b} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r0v6, resolved type: z2.b} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r0v13, resolved type: z2.b} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r4v1, resolved type: z2.b} */
    /* JADX WARNING: Code restructure failed: missing block: B:16:0x0050, code lost:
        if (r0 == null) goto L_0x0053;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:17:0x0053, code lost:
        r0 = null;
     */
    /* JADX WARNING: Multi-variable type inference failed */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private z2.g h(s2.m r12) throws java.io.IOException {
        /*
            r11 = this;
            z2.g r0 = r11.r(r12)
            f3.a r1 = r11.f24132l
            long r2 = r12.c()
            z2.c r1 = q(r1, r2)
            boolean r2 = r11.f24138r
            if (r2 == 0) goto L_0x0018
            z2.g$a r12 = new z2.g$a
            r12.<init>()
            return r12
        L_0x0018:
            r2 = 0
            int r3 = r11.f24121a
            r3 = r3 & 4
            if (r3 == 0) goto L_0x004c
            r2 = -1
            if (r1 == 0) goto L_0x002e
            long r2 = r1.i()
            long r0 = r1.d()
        L_0x002b:
            r9 = r0
            r5 = r2
            goto L_0x0041
        L_0x002e:
            if (r0 == 0) goto L_0x0039
            long r2 = r0.i()
            long r0 = r0.d()
            goto L_0x002b
        L_0x0039:
            f3.a r0 = r11.f24132l
            long r0 = l(r0)
            r5 = r0
            r9 = r2
        L_0x0041:
            z2.b r0 = new z2.b
            long r7 = r12.c()
            r4 = r0
            r4.<init>(r5, r7, r9)
            goto L_0x0054
        L_0x004c:
            if (r1 == 0) goto L_0x0050
            r0 = r1
            goto L_0x0054
        L_0x0050:
            if (r0 == 0) goto L_0x0053
            goto L_0x0054
        L_0x0053:
            r0 = r2
        L_0x0054:
            r1 = 1
            if (r0 == 0) goto L_0x0062
            boolean r2 = r0.f()
            if (r2 != 0) goto L_0x006e
            int r2 = r11.f24121a
            r2 = r2 & r1
            if (r2 == 0) goto L_0x006e
        L_0x0062:
            int r0 = r11.f24121a
            r0 = r0 & 2
            if (r0 == 0) goto L_0x0069
            goto L_0x006a
        L_0x0069:
            r1 = 0
        L_0x006a:
            z2.g r0 = r11.k(r12, r1)
        L_0x006e:
            return r0
        */
        throw new UnsupportedOperationException("Method not decompiled: z2.f.h(s2.m):z2.g");
    }

    private long i(long j10) {
        return this.f24133m + ((j10 * 1000000) / ((long) this.f24124d.f21280d));
    }

    private g k(m mVar, boolean z10) throws IOException {
        mVar.p(this.f24123c.e(), 0, 4);
        this.f24123c.T(0);
        this.f24124d.a(this.f24123c.p());
        return new a(mVar.b(), mVar.c(), this.f24124d, z10);
    }

    private static long l(a aVar) {
        if (aVar == null) {
            return -9223372036854775807L;
        }
        int e10 = aVar.e();
        for (int i10 = 0; i10 < e10; i10++) {
            a.b d10 = aVar.d(i10);
            if (d10 instanceof k3.m) {
                k3.m mVar = (k3.m) d10;
                if (mVar.f19654a.equals("TLEN")) {
                    return n0.C0(Long.parseLong(mVar.f19667d.get(0)));
                }
            }
        }
        return -9223372036854775807L;
    }

    private static int m(a0 a0Var, int i10) {
        if (a0Var.g() >= i10 + 4) {
            a0Var.T(i10);
            int p10 = a0Var.p();
            if (p10 == 1483304551 || p10 == 1231971951) {
                return p10;
            }
        }
        if (a0Var.g() < 40) {
            return 0;
        }
        a0Var.T(36);
        return a0Var.p() == 1447187017 ? 1447187017 : 0;
    }

    private static boolean n(int i10, long j10) {
        return ((long) (i10 & -128000)) == (j10 & -128000);
    }

    /* access modifiers changed from: private */
    public static /* synthetic */ l[] o() {
        return new l[]{new f()};
    }

    /* access modifiers changed from: private */
    public static /* synthetic */ boolean p(int i10, int i11, int i12, int i13, int i14) {
        return (i11 == 67 && i12 == 79 && i13 == 77 && (i14 == 77 || i10 == 2)) || (i11 == 77 && i12 == 76 && i13 == 76 && (i14 == 84 || i10 == 2));
    }

    private static c q(a aVar, long j10) {
        if (aVar == null) {
            return null;
        }
        int e10 = aVar.e();
        for (int i10 = 0; i10 < e10; i10++) {
            a.b d10 = aVar.d(i10);
            if (d10 instanceof k) {
                return c.b(j10, (k) d10, l(aVar));
            }
        }
        return null;
    }

    /* JADX WARNING: Removed duplicated region for block: B:11:0x003f A[ADDED_TO_REGION] */
    /* JADX WARNING: Removed duplicated region for block: B:25:0x00ab A[ADDED_TO_REGION] */
    /* JADX WARNING: Removed duplicated region for block: B:31:? A[ADDED_TO_REGION, RETURN, SYNTHETIC] */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private z2.g r(s2.m r11) throws java.io.IOException {
        /*
            r10 = this;
            k4.a0 r5 = new k4.a0
            p2.h0$a r0 = r10.f24124d
            int r0 = r0.f21279c
            r5.<init>((int) r0)
            byte[] r0 = r5.e()
            p2.h0$a r1 = r10.f24124d
            int r1 = r1.f21279c
            r6 = 0
            r11.p(r0, r6, r1)
            p2.h0$a r0 = r10.f24124d
            int r1 = r0.f21277a
            r2 = 1
            r1 = r1 & r2
            r3 = 21
            if (r1 == 0) goto L_0x0028
            int r0 = r0.f21281e
            if (r0 == r2) goto L_0x002c
            r3 = 36
            r7 = 36
            goto L_0x0033
        L_0x0028:
            int r0 = r0.f21281e
            if (r0 == r2) goto L_0x002f
        L_0x002c:
            r7 = 21
            goto L_0x0033
        L_0x002f:
            r3 = 13
            r7 = 13
        L_0x0033:
            int r8 = m(r5, r7)
            r0 = 1483304551(0x58696e67, float:1.02664153E15)
            r9 = 1231971951(0x496e666f, float:976486.94)
            if (r8 == r0) goto L_0x0062
            if (r8 != r9) goto L_0x0042
            goto L_0x0062
        L_0x0042:
            r0 = 1447187017(0x56425249, float:5.3414667E13)
            if (r8 != r0) goto L_0x005d
            long r0 = r11.b()
            long r2 = r11.c()
            p2.h0$a r4 = r10.f24124d
            z2.h r0 = z2.h.b(r0, r2, r4, r5)
            p2.h0$a r1 = r10.f24124d
            int r1 = r1.f21279c
            r11.m(r1)
            goto L_0x00b2
        L_0x005d:
            r0 = 0
            r11.l()
            goto L_0x00b2
        L_0x0062:
            long r0 = r11.b()
            long r2 = r11.c()
            p2.h0$a r4 = r10.f24124d
            z2.i r0 = z2.i.b(r0, r2, r4, r5)
            if (r0 == 0) goto L_0x009c
            s2.x r1 = r10.f24125e
            boolean r1 = r1.a()
            if (r1 != 0) goto L_0x009c
            r11.l()
            int r7 = r7 + 141
            r11.i(r7)
            k4.a0 r1 = r10.f24123c
            byte[] r1 = r1.e()
            r2 = 3
            r11.p(r1, r6, r2)
            k4.a0 r1 = r10.f24123c
            r1.T(r6)
            s2.x r1 = r10.f24125e
            k4.a0 r2 = r10.f24123c
            int r2 = r2.J()
            r1.d(r2)
        L_0x009c:
            p2.h0$a r1 = r10.f24124d
            int r1 = r1.f21279c
            r11.m(r1)
            if (r0 == 0) goto L_0x00b2
            boolean r1 = r0.f()
            if (r1 != 0) goto L_0x00b2
            if (r8 != r9) goto L_0x00b2
            z2.g r11 = r10.k(r11, r6)
            return r11
        L_0x00b2:
            return r0
        */
        throw new UnsupportedOperationException("Method not decompiled: z2.f.r(s2.m):z2.g");
    }

    private boolean s(m mVar) throws IOException {
        g gVar = this.f24137q;
        if (gVar != null) {
            long d10 = gVar.d();
            if (d10 != -1 && mVar.h() > d10 - 4) {
                return true;
            }
        }
        try {
            return !mVar.g(this.f24123c.e(), 0, 4, true);
        } catch (EOFException unused) {
            return true;
        }
    }

    private int t(m mVar) throws IOException {
        if (this.f24131k == 0) {
            try {
                v(mVar, false);
            } catch (EOFException unused) {
                return -1;
            }
        }
        if (this.f24137q == null) {
            g h10 = h(mVar);
            this.f24137q = h10;
            this.f24128h.j(h10);
            this.f24130j.a(new r1.b().g0(this.f24124d.f21278b).Y(4096).J(this.f24124d.f21281e).h0(this.f24124d.f21280d).P(this.f24125e.f22484a).Q(this.f24125e.f22485b).Z((this.f24121a & 8) != 0 ? null : this.f24132l).G());
            this.f24135o = mVar.c();
        } else if (this.f24135o != 0) {
            long c10 = mVar.c();
            long j10 = this.f24135o;
            if (c10 < j10) {
                mVar.m((int) (j10 - c10));
            }
        }
        return u(mVar);
    }

    private int u(m mVar) throws IOException {
        if (this.f24136p == 0) {
            mVar.l();
            if (s(mVar)) {
                return -1;
            }
            this.f24123c.T(0);
            int p10 = this.f24123c.p();
            if (!n(p10, (long) this.f24131k) || h0.j(p10) == -1) {
                mVar.m(1);
                this.f24131k = 0;
                return 0;
            }
            this.f24124d.a(p10);
            if (this.f24133m == -9223372036854775807L) {
                this.f24133m = this.f24137q.a(mVar.c());
                if (this.f24122b != -9223372036854775807L) {
                    this.f24133m += this.f24122b - this.f24137q.a(0);
                }
            }
            h0.a aVar = this.f24124d;
            this.f24136p = aVar.f21279c;
            g gVar = this.f24137q;
            if (gVar instanceof b) {
                b bVar = (b) gVar;
                bVar.c(i(this.f24134n + ((long) aVar.f21283g)), mVar.c() + ((long) this.f24124d.f21279c));
                if (this.f24139s && bVar.b(this.f24140t)) {
                    this.f24139s = false;
                    this.f24130j = this.f24129i;
                }
            }
        }
        int e10 = this.f24130j.e(mVar, this.f24136p, true);
        if (e10 == -1) {
            return -1;
        }
        int i10 = this.f24136p - e10;
        this.f24136p = i10;
        if (i10 > 0) {
            return 0;
        }
        this.f24130j.b(i(this.f24134n), 1, this.f24124d.f21279c, 0, (e0.a) null);
        this.f24134n += (long) this.f24124d.f21283g;
        this.f24136p = 0;
        return 0;
    }

    private boolean v(m mVar, boolean z10) throws IOException {
        int i10;
        int i11;
        int j10;
        h.a aVar;
        int i12 = z10 ? 32768 : 131072;
        mVar.l();
        if (mVar.c() == 0) {
            if ((this.f24121a & 8) == 0) {
                aVar = null;
            } else {
                aVar = f24120v;
            }
            a a10 = this.f24126f.a(mVar, aVar);
            this.f24132l = a10;
            if (a10 != null) {
                this.f24125e.c(a10);
            }
            i10 = (int) mVar.h();
            if (!z10) {
                mVar.m(i10);
            }
            i11 = 0;
        } else {
            i11 = 0;
            i10 = 0;
        }
        int i13 = 0;
        int i14 = 0;
        while (true) {
            if (!s(mVar)) {
                this.f24123c.T(0);
                int p10 = this.f24123c.p();
                if ((i11 == 0 || n(p10, (long) i11)) && (j10 = h0.j(p10)) != -1) {
                    i13++;
                    if (i13 != 1) {
                        if (i13 == 4) {
                            break;
                        }
                    } else {
                        this.f24124d.a(p10);
                        i11 = p10;
                    }
                    mVar.i(j10 - 4);
                } else {
                    int i15 = i14 + 1;
                    if (i14 != i12) {
                        if (z10) {
                            mVar.l();
                            mVar.i(i10 + i15);
                        } else {
                            mVar.m(1);
                        }
                        i14 = i15;
                        i11 = 0;
                        i13 = 0;
                    } else if (z10) {
                        return false;
                    } else {
                        throw y2.a("Searched too many bytes.", (Throwable) null);
                    }
                }
            } else if (i13 <= 0) {
                throw new EOFException();
            }
        }
        if (z10) {
            mVar.m(i10 + i14);
        } else {
            mVar.l();
        }
        this.f24131k = i11;
        return true;
    }

    public void b(n nVar) {
        this.f24128h = nVar;
        e0 e10 = nVar.e(0, 1);
        this.f24129i = e10;
        this.f24130j = e10;
        this.f24128h.q();
    }

    public void c(long j10, long j11) {
        this.f24131k = 0;
        this.f24133m = -9223372036854775807L;
        this.f24134n = 0;
        this.f24136p = 0;
        this.f24140t = j11;
        g gVar = this.f24137q;
        if ((gVar instanceof b) && !((b) gVar).b(j11)) {
            this.f24139s = true;
            this.f24130j = this.f24127g;
        }
    }

    public boolean e(m mVar) throws IOException {
        return v(mVar, true);
    }

    public int g(m mVar, s2.a0 a0Var) throws IOException {
        f();
        int t10 = t(mVar);
        if (t10 == -1 && (this.f24137q instanceof b)) {
            long i10 = i(this.f24134n);
            if (this.f24137q.i() != i10) {
                ((b) this.f24137q).e(i10);
                this.f24128h.j(this.f24137q);
            }
        }
        return t10;
    }

    public void j() {
        this.f24138r = true;
    }

    public void release() {
    }

    public f(int i10) {
        this(i10, -9223372036854775807L);
    }

    public f(int i10, long j10) {
        this.f24121a = (i10 & 2) != 0 ? i10 | 1 : i10;
        this.f24122b = j10;
        this.f24123c = new a0(10);
        this.f24124d = new h0.a();
        this.f24125e = new x();
        this.f24133m = -9223372036854775807L;
        this.f24126f = new y();
        s2.k kVar = new s2.k();
        this.f24127g = kVar;
        this.f24130j = kVar;
    }
}
